(function(e){e.probablyMobile=function(){var appsVersion=navigator.appVersion,isAndroid=(/android/gi).test(appsVersion),isIOS=(/iphone|ipad|ipod/gi).test(appsVersion);return(isAndroid||isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent));}
e.fn.doScroller=function(b){var c={transitionSpeed:500,easing:"swing",pageClass:"page",menuItemClass:"menu-item",menuActiveClass:'active',navClass:"default-theme",deepLink:false,HTML5Enabled:false,keyboardNavEnabled:true,nav:[],navPlaceHolder:'',scrollOffset:0,leaveHeader:'.header',initialize:function(){},beforeAnimStart:function(){},afterAnimComplete:function(){},pageChange:function(){}},conf=e.extend(true,{},c,b);return this.each(function(){var a=new doScroll(e(this),conf);})};function doScroll(a,c){doScroller={};doScroller.hackEvent='#hackEvent';e.fx.interval=5;doScroller.scrollDocument=e(document);doScroller.scrollWindow=e(window);doScroller.scrollBody=e("body");doScroller.scrollPosition=doScroller.scrollWindow.scrollTop();doScroller.startHeight=doScroller.scrollWindow.height();doScroller.o=c;doScrollerLeave=e(doScroller.o.leaveHeader);eleInview=doScroller.o.menuActiveClass;var d="div",currentPage=0,stNative='',stChange='',na=false,header=(c.navPlaceHolder&&doScroller.o.nav instanceof Array)?(e(c.navPlaceHolder).length)?e(c.navPlaceHolder):a:a;c.HTML5Enabled&&(d="nav");doScroller.o.nav instanceof Array&&(header.append("<"+d+' class="default-theme '+c.navClass+'"><ul></ul></'+d+">"),doScroller.wrapper=e("."+c.navClass.replace(/\s/g,"."),header),doScroller.nav=e("ul",doScroller.wrapper),doScroller.wrapper.addClass("left"),a.css({position:"relative"}));c.HTML5Enabled?doScroller.sections=e("section",a):doScroller.sections=e("."+c.pageClass,a);doScroller.sections.each(function(b){var a=e(this),d=doScroller.sections.eq(b).attr("title"),f=c.menuItemClass+" "+c.menuItemClass+"_"+(b+1);b==doScroller.sections.length-1&&(f+=" "+c.menuItemClass+"_last");a.css({display:"block",position:"relative","float":"none"});a.addClass(doScroller.o.pageClass+"_"+(b+1));doScroller.o.nav instanceof Array?doScroller.o.nav.length?doScroller.nav.append('<li class="'+f+'"><a href="#doScroll'+b+'">'+doScroller.o.nav[b]+"</a></li>"):d&&""!=d?doScroller.nav.append('<li class="'+f+'"><a href="#doScroll'+b+'">'+d+"</a></li>"):doScroller.nav.append('<li class="'+f+'"><a href="#doScroll'+b+'">nav '+(b+1)+"</a></li>"):doScroller.nav=e(doScroller.o.nav)});doScroller.pageLinks=e("a",doScroller.nav);doScroller.pageLinks.each(function(b){e(this).on("click",function(d){d.preventDefault();c.beforeAnimStart();doScroller.scrollBody.is(":animated")||(doScroller.pageLinks.parent("li").removeClass(eleInview),e(this).parent("li").addClass(eleInview));g(a,doScroller.sections.eq(b),b);})});doScroller.next=function(){var b=currentPage+1;if(b!=doScroller.sections.length){var c=doScroller.sections.eq(b);g(a,c,b);}};doScroller.prev=function(){var b=currentPage-1;0>=b&&(b=0);var c=doScroller.sections.eq(b);g(a,c,b);};doScroller.goTo=function(b){var b=b-1,c=doScroller.sections.eq(b);g(a,c,b);};doScroller.o.keyboardNavEnabled&&doScroller.scrollDocument.on("keydown",function(b){var a=b.which?b.which:b.keyCode;if(38==a||40==a)b.preventDefault(),38==a?currentPage?doScroller.goTo(currentPage):doScroller.goTo(currentPage+1):40==a&&(currentPage+1==doScroller.sections.length?doScroller.goTo(currentPage+1):doScroller.goTo(currentPage+2))});doScroller.scrollWindow.on("scroll",function(){k();});setTimeout(function(){l();k();},7)
var isInit=false,l=function(){if(doScroller.o.deepLink){var a=window.location.hash;a&&doScroller.pageLinks.each(function(c){var d=doScroller.pageLinks.eq(c).attr('data-title'),d=d.replace(/[^a-zA-Z 0-9]+/g,"").replace(/\s+/g,"-").toLowerCase();if(a=="#"+d)return doScroller.goTo(c+1),!1})}},k=function(){doScroller.scrollPosition=doScroller.scrollWindow.scrollTop();doScroller.scrollDistance=doScroller.scrollPosition+doScroller.startHeight;for(i=0;i<doScroller.sections.length;i++){var a=doScroller.sections.eq(i).offset().top;doScroller.o.scrollOffset&&a&&(a+=(-doScrollerLeave.height()));var c=0;if(i<doScroller.sections.length-1){var d=doScroller.sections.eq(i+1);doScroller.o.scrollOffset?c=parseInt(d.offset().top+(-doScrollerLeave.height())):c=d.offset().top;var d=doScroller.pageLinks.eq(i).parent("li"),b=doScroller.pageLinks.eq(doScroller.sections.length-1).parent("li")}
if(doScroller.scrollBody.is(":animated"))return!1;if(doScroller.scrollDocument.height()==doScroller.scrollDistance){if(!b.hasClass(eleInview))return updateTo=doScroller.sections.length-1,h(updateTo),!1}else if(c){if(doScroller.scrollPosition>=a&&doScroller.scrollPosition<c&&!d.hasClass(eleInview))return updateTo=i,h(updateTo),!1}else if(doScroller.scrollPosition>=a&&i==doScroller.sections.length-1&&!b.hasClass(eleInview))return updateTo=doScroller.sections.length-1,h(updateTo),!1}},g=function(a,c,d){var a=e("html, body"),b=doScroller.scrollWindow.scrollTop(),c=c.offset().top+((b>=0)?0:2);doScroller.o.scrollOffset&&(c+=(-doScrollerLeave.height()));0>c&&(c=0);c!=b&&!a.is(":animated")&&a.stop(true,true).animate({scrollTop:c},doScroller.o.transitionSpeed,doScroller.o.easing).promise().done(function(){h(d);doScroller.o.afterAnimComplete();})},h=function(a){doScroller.pageLinks.parent("li").removeClass(eleInview);doScroller.pageLinks.eq(a).parent("li").addClass(eleInview);currentPage=a;doScroller.current=currentPage;doScroller.o.deepLink&&(a=doScroller.pageLinks.eq(a).attr('data-title'),a=a.replace(/[^a-zA-Z 0-9]+/g,"").replace(/\s+/g,"-").toLowerCase(),window.location.hash=a);m();},m=function(){if(!isInit){if(doScroller.o.deepLink){doScroller.scrollWindow.off('hashchange').on('hashchange',function(event){event.preventDefault();na=true;stNative&&clearTimeout(stNative);stNative=setTimeout(function(){na&&l();},17);});}
isInit=true;doScroller.o.initialize();}
stChange&&clearTimeout(stChange);stChange=setTimeout(function(){na=false;},10);if(e.probablyMobile()){(e(doScroller.hackEvent).length)?e(doScroller.hackEvent).remove():doScroller.scrollBody.append('<div id="hackEvent" style="height: 1px; opacity:0;"></div>');}
doScroller.o.pageChange();};}})(jQuery);